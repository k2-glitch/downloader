# بوت تيليجرام تنزيل فيديوهات/صور — مجاني (يعمل بخاصية الخمول/الاستيقاظ)

> **الفكرة:** ننشر البوت على **Render** كخدمة ويب تستقبل Webhook من تيليجرام.  
> Render يقوم بإيقاف الخدمة بعد وقت خمول، وعند أول رسالة جديدة من المستخدم — تيليجرام يرسل طلبًا إلى رابط الـ Webhook فيُوقِظ Render الخدمة تلقائيًا.  
> بهذه الطريقة نوفر ساعات التشغيل المجانية قدر الإمكان.

---

## ✅ المزايا
- تنزيل من أغلب المنصات (يوتيوب، إنستغرام، تيك توك، فيسبوك، تويتر...).  
- لا يعتمد على ffmpeg (نحاول اختيار صيغة جاهزة).  
- يعمل محليًا بـ **polling**، وعلى Render بـ **webhook** (لأجل النوم/الاستيقاظ).  
- تعليقات عربية داخل الكود تسهّل التعديل.

## ⚠️ تنبيه قانوني
استخدم الأداة فقط فيما هو مسموح قانونيًا، واحترم حقوق النشر وشروط المنصات. أنت تتحمل المسؤولية عن المحتوى الذي تقوم بتنزيله.

---

## 1) الإعداد محليًا (اختياريًا للتجربة)
1. ثبّت بايثون 3.10+.
2. داخل مجلد المشروع:
   ```bash
   pip install -r requirements.txt
   ```
3. أنشئ بوتًا عبر [@BotFather](https://t.me/BotFather) واحصل على **BOT_TOKEN**.
4. شغّل:
   ```bash
   export BOT_TOKEN=ضع_التوكن_هنا   # على ويندوز: set BOT_TOKEN=...
   python bot.py
   ```
5. أرسل أي رابط للفيديو/الصورة إلى البوت — سيعمل بالـ **polling** محليًا.

---

## 2) النشر على Render (مُستحسن لخيار مجاني بخاصية النوم)
> ستحتاج حساب GitHub لرفع هذا المشروع كمستودع.

### الخطوات
1. **ارفع المشروع إلى GitHub**:
   - أنشئ مستودع جديد \u2192 ارفع الملفات (أو استخدم الملف المضغوط وأعد رفعه).
2. في لوحة **Render**:
   - New \u2192 **Web Service** \u2192 اربط بحساب GitHub \u2192 اختر المستودع.
   - سيقرأ Render ملف `render.yaml` ويملأ الإعدادات تلقائيًا (أو ببساطة اقبل الإعدادات الافتراضية).
3. في قسم **Environment** أضف متغيرًا:
   - `BOT_TOKEN` = (التوكن من BotFather)
4. **انشر الخدمة** لأول مرة (Deploy).  
   بعد النجاح ستحصل على رابط عام مثل: `https://your-app.onrender.com`
5. الآن انسخ هذا الرابط وأضفه كمتغير بيئة جديد:
   - `APP_URL` = `https://your-app.onrender.com`
6. **أعد النشر** (Re-deploy) — هذه المرة سيعمل البوت بوضع **webhook**.  
   عند أول رسالة جديدة سيُوقظ Render الخدمة تلقائيًا ويعالج الطلب.

> ملاحظة: خدمة Render المجانية قد تنام بعد ~15 دقيقة خمول. هذا طبيعي ومقصود للتوفير.

---

## 3) النشر على Railway (بديل مجاني)
- أنشئ خدمة **Web** (ليس Worker).
- اضبط متغير `BOT_TOKEN`، ثم انشر.
- بعد ظهور رابط الخدمة العام، أضف `APP_URL` بذلك الرابط وأعد النشر.
- تأكد أن بالسياسة المجانية قد يحدث نوم/استيقاظ مشابه.

---

## 4) تخصيصات مفيدة
- الرسائل: عدّل نصوص `/start`, `/help`, `/about` داخل `bot.py`.
- التنزيل: خيار الصيغ مضبوط داخل دالة `_ytdlp_opts`؛ يمكنك تغييره.
- الحجم الكبير: تيليجرام قد يرفض ملفات ضخمة جدًا — الكود يحاول إرسالها كوثيقة عند الفشل.

---

## 5) استكشاف الأخطاء
- تأكد أن `BOT_TOKEN` صحيح.
- على Render: أضف `APP_URL` بعد أول نشر ثم أعد النشر.
- راقب **Logs** في Render إن حصل خطأ أثناء التنزيل أو الإرسال.
- بعض الروابط قد تتطلب دمج (ffmpeg) — عندها قد يفشل التنزيل بدون ffmpeg.

موفّق! 🚀
